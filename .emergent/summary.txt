<analysis>**original_problem_statement:**
The user wants to build a web application called BOVINE Cattle Movement Intelligence for the United Nations. The application's purpose is to track and predict cattle movement in South Sudan to help mitigate conflict, resource scarcity, and humanitarian risks. The system should use AI, mapping, and predictive modeling based on open-source satellite imagery and geospatial data. A key user requirement is that the application must use real, verifiable data and avoid simulations wherever possible, presenting itself as a Bloomberg Terminal for humanitarian intelligence.

**PRODUCT REQUIREMENTS:**
- **UI/UX:** A dark, tactile, Bloomberg-style interface, mobile-responsive, with data-rich displays.
- **Data & Features:**
    - **Live & Real Data:** The application must integrate a wide array of real-time or near-real-time data sources. All simulated data must be replaced.
    - **Map:** An interactive map must be the central component, displaying:
        - Cattle herd locations (estimated from real data).
        - Conflict zones with risk levels.
        - Multiple weather overlays (live weather, radar, clouds).
        - High-definition satellite imagery as a base layer.
    - **Data Layers:** Toggleable layers for migration corridors, water sources, vegetation index (NDVI), soil moisture, fire hotspots, flood risk, and nighttime lights.
    - **Evidence & Estimation:** For each data point (especially estimated herds), the app must clearly indicate its source, accuracy, and whether it's LIVE, CACHED, ESTIMATED, or HISTORICAL. The estimation methodology must be explainable.
    - **AI Analysis:** An AI-powered chat to ask questions about herd movements, conflict risks, and environmental factors.
    - **News & Alerts:** Live feeds of local news and global disaster alerts.
    - **Historical Data:** Store and retrieve historical data for analysis and backtesting.
- **Technology:**
    - Frontend: React
    - Backend: FastAPI
    - AI: Emergent LLM
    - Data: Google Earth Engine, various public APIs.
    - Database: MongoDB for caching and history.

**User's preferred language**: English

**what currently exists?**
A full-stack web application with a Bloomberg Terminal style UI. The backend has been massively overhauled to integrate ~13 real data sources, replacing the initial simulated data. It now uses Google Earth Engine (GEE) for live NDVI, soil moisture, and rainfall data. Other live/cached sources include ACLED (conflicts), NASA FIRMS (fires), RainViewer (weather radar), and GDACS (disasters). The frontend displays these data layers on a Leaflet map and in various panels, with indicators for data status (LIVE, ESTIMATED, CACHED). The estimation logic for herds, while based on real data points (FAO stats, NDVI, water sources), is still a black box that the user wants explained. A comprehensive  and  have been created.

**Last working item**:
The user requested that when a herd is clicked in the list on the left panel, the right panel should automatically open and switch to the HERD details tab. The agent began implementing this by modifying the  component to handle the click event.
    - Last item agent was working: Implementing the auto-opening of the herd details tab upon clicking a herd in the list.
    - Status: IN PROGRESS
    - Agent Testing Done: N
    - Which testing method agent to use? Frontend testing agent
    - User Testing Done: N

**All Pending/In progress Issue list**:
  - None.

**In progress Task List**:
  Task 1:  Automatically open the 'HERD' tab in the Right Panel when a herd is clicked in the Left Panel list (P0)

 Task Detail:
  - Task 1: 
     - Where to resume: The agent has modified . The next step is to update  to create and expose a function that can set the active tab state for the . Then,  must be modified to consume this new state/function, and  must be updated to call it on herd click.
     - What will be achieved with this? This will improve the user experience by making the interface more intuitive and reducing the number of clicks required to view herd details.
     - Status: IN PROGRESS
     - Should Test frontend/backend/both after fix? Frontend
     - Blocked on something: None

**Upcoming and Future Tasks**
 Upcoming Tasks:
- **Task 1: Explain Estimation Algorithm & Add Data Source Details (P0):** The user wants a detailed explanation of how herd locations are estimated. This involves:
    - Creating a clear, step-by-step text explanation for the user.
    - Integrating this explanation into the UI, potentially via tooltips, info icons, or a dedicated section in the DATA tab. For each data point (e.g., NDVI, herd size), an explanation of its source and role in the estimation should be available.
- **Task 2: Improve Data Source Accuracy Display (P1):** Add explicit accuracy levels or confidence scores for each data source and estimation, as requested by the user.

 Future Tasks:
- **Task 3: Implement Simple Mode (P2):** A user-requested feature to provide a less complex UI view.
- **Task 4: Backtest Predictive Models (P2):** Validate the accuracy of movement predictions using the integrated historical data.
- **Task 5: Implement High-Def Satellite Capture (P3):** A feature to request the most recent high-resolution satellite image for a specific area, likely requiring a paid API.
- **Task 6: IoT Collar Integration (P3):** Integrate real-time GPS tracking from IoT collars on cattle for ground-truth data.

**Completed work in this session**
- **Massive Real Data Integration:** Replaced nearly all simulated data with ~13 real data sources.
- **Google Earth Engine Integration:** Successfully integrated GEE for live data on NDVI, soil moisture (SMAP), rainfall (CHIRPS), and nighttime lights (VIIRS).
- **Additional Data Sources:** Integrated live/cached data from ACLED (conflicts), NASA FIRMS (fires), RainViewer (weather radar), GDACS (disasters), Open-Meteo, and ReliefWeb.
- **Backend Batch Processing:** Implemented a background scheduler () to periodically fetch and cache data from all sources, improving performance and managing API rate limits.
- **UI Bloomberg Enhancements:**
    - Added LIVE, CACHED, ESTIMATED tags to data points in the UI.
    - Added multiple weather overlay options (Clouds, Radar).
    - Expanded the Data Sources panel to show the status of all integrated sources.
- **Documentation:** Created comprehensive  with setup instructions and a  explaining the architecture, data flow, and stack.
- **Bug Fix:** Resolved the issue where the HERD tab was not displaying its content correctly.

**Earlier issues found/mentioned but not fixed**
   - None. The primary issue from the last fork regarding the HERD tab was resolved.

**Known issue recurrence from previous fork**
  - **Issue recurrence in previous fork:** AI Integration () and Map  errors.
  - **Recurrence count:** 3+ in the previous session.
  - **Status:** RESOLVED. These issues did not recur in the current session. The agent successfully modified related components without reintroducing the bugs.

**Code Architecture**


**Key Technical Concepts**
- **Frontend:** React, Tailwind CSS, Leaflet.js, Framer Motion, Axios
- **Backend:** Python, FastAPI, APScheduler (for background tasks)
- **Database:** MongoDB (used as a cache for API data and for storing analysis history)
- **GIS/Remote Sensing:** Google Earth Engine (GEE), GeoJSON
- **Data APIs:** Open-Meteo, ACLED, NASA FIRMS, RainViewer, GDACS, ReliefWeb
- **Architecture:** SPA with a RESTful API backend featuring a background job scheduler for data ingestion.

**key DB schema**
  - **analysis_history**: 
  - **api_cache**:  (Inferred schema for caching various API responses like weather, conflicts, etc.)
  - **gee_cache**:  (Inferred schema for GEE data)

**changes in tech stack**
  - **Google Earth Engine (earthengine-api):** Added for real-time geospatial data processing.
  - **APScheduler:** Added to the backend to run periodic, batched data updates in the background.

**All files of reference**
- **/app/backend/server.py**: Heavily modified. Now contains all API endpoints, data fetching logic for 13 sources, Google Earth Engine integration, and the background scheduling task.
- **/app/frontend/src/context/DataContext.jsx**: Manages state for all new data sources.
- **/app/frontend/src/components/MapView.jsx**: Updated to include new data layers (fires, weather radar).
- **/app/frontend/src/components/RightPanel.jsx**: Updated with new tabs and to correctly display data source information.
- **/app/frontend/src/components/LeftPanel.jsx**: Modified to begin implementing the herd-click feature.
- **/app/backend/gee_credentials.json**: New file containing the service account key for Google Earth Engine.
- **/app/README.md**: New file with setup and deployment instructions.
- **/app/TECHNICAL_BREAKDOWN.md**: New file with a detailed system overview.

**Areas that need refactoring**:
- ** is critically monolithic.** It has grown to over 1000 lines and handles API routing, data fetching from a dozen sources, GEE authentication/logic, and background scheduling. It MUST be broken down into a modular structure (e.g., a  directory with separate files for each source, a  directory for GEE logic, and a  module).
- **** remains large and could be broken down into smaller components for each layer (, , ).

**key api endpoints**
- : Main header stats, now includes live NDVI.
- : Estimated herd data.
- : Real conflict data from ACLED.
- : Status of all 13 integrated sources.
- : Live fire data from NASA FIRMS.
- : Live data from GEE.
- : Live data from GEE.
- : Live data from GEE.
- : Live data from GEE.
- : AI analysis endpoint.
- : Triggers the background data update manually.

**Critical Info for New Agent**
- **The user's top priority is understanding the estimation logic.** The app now has a wealth of real data, but the user needs to know exactly how that data is used to estimate herd locations and sizes. This is both a documentation and a UI task.
- **The  file is fragile due to its size.** Refactoring it should be a high priority to ensure maintainability.
- **The herd data is still ESTIMATED**, not tracked via GPS. This is a crucial distinction to maintain in all communication and UI labeling. The estimation is now *data-driven*, but it's not ground truth.
- The testing agent call failed in the last session. The agent relied on extensive manual testing (curl, screenshots). A full run with the testing agent is recommended after the current UI task is complete.

**documents and test reports created in this job**
- **/app/README.md**
- **/app/TECHNICAL_BREAKDOWN.md**
- **/app/memory/PRD.md**

**Last 10 User Messages and any pending HUMAN messages** 
- User requested a detailed explanation of the estimation algorithm, data sources, accuracy, and for the UI to reflect this information clearly. (Status: In Progress)
- User requested that clicking a herd in the list should automatically open the sidebar with the herd info tab. (Status: In Progress)
- User requested a complete technical breakdown of the stack, data sources, and algorithms, with deployment instructions. (Status: Completed,  created)
- User confirmed to add all possible free data sources and last updated counters for estimated data. (Status: Completed)
- User asked if all data is real now and requested setup instructions and info on adding more data streams like weather radar. (Status: Answered, and new data streams were integrated)
- User provided a Google Earth Engine service account key. (Status: Completed, key integrated)

**Project Health Check:**
- **Broken:** None. The core functionality is working.
- **Mocked:**
    - **Herd Locations, Counts, and Movements:** These are **ESTIMATED** based on a combination of real data sources (NDVI, water, conflict, FAO stats). This is the most critical mocked element that the user wants full transparency on.

**3rd Party Integrations**
- **Emergent LLM (Anthropic Claude)** — uses Emergent LLM Key.
- **Google Earth Engine** — requires User-provided service account JSON.
- **Open-Meteo API** (Weather) — requires no key.
- **ACLED API** (Conflict Data) — requires no key (but registration is recommended).
- **NASA FIRMS API** (Fires) — requires no key for standard use.
- **RainViewer API** (Weather Radar) — requires no key.
- **ReliefWeb API** (News) — requires no key.
- **GDACS API** (Disasters) — requires no key.
- **Leaflet.js & ESRI World Imagery** — requires no key.
- **FAO, IGAD, OpenStreetMap:** Used as static/reference data sources.

**Testing status**
  - Testing agent used after significant changes: NO (The call failed, agent performed manual testing instead).
  - Troubleshoot agent used after agent stuck in loop: NO
  - Test files created: []
  - Known regressions: None from this session.

**Credentials to test flow:**
- **Google Earth Engine:** The service account key is stored at . The backend is configured to use this file. No user action is needed.

**What agent forgot to execute**
- The agent has not yet provided the detailed, user-facing explanation of the herd estimation algorithm as requested.
- The agent was in the middle of implementing the click herd to open tab UI feature when the session ended.</analysis>
